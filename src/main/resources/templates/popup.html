<th:block th:fragment="popup_modal">
<div class="modal fade message-modal" th:classappend="${mainMessageType}" tabindex="-1" id="message_modal" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            	<h4 class="modal-title">
                    <th:block th:if="${mainMessageType == 'info'}" ><em class="fa fa-info"></em> <th:block th:if="${#strings.isEmpty(mainPopupTitle)}" th:text="#{lbl.modal.info}"></th:block></th:block>
                	<th:block th:if="${mainMessageType == 'success'}"><em class="fa fa-check"></em> <th:block th:if="${#strings.isEmpty(mainPopupTitle)}" th:text="#{lbl.modal.success}"></th:block></th:block>
                	<th:block th:if="${mainMessageType == 'warning'}"><em class="fa fa-exclamation"></em> <th:block th:if="${#strings.isEmpty(mainPopupTitle)}" th:text="#{lbl.modal.warn}"></th:block></th:block>
                	<th:block th:if="${mainMessageType == 'error'}"> <th:block th:if="${#strings.isEmpty(mainPopupTitle)}" th:text="#{lbl.modal.error}"></th:block></th:block>
                	<th:block th:if="${mainMessageType == 'confirm'}"> <th:block th:if="${#strings.isEmpty(mainPopupTitle)}" th:text="#{lbl.modal.confirm}"></th:block></th:block>
					<th:block th:unless="${#strings.isEmpty(mainPopupTitle)}" th:text="${mainPopupTitle}"></th:block>
                </h4>
            	<th:block th:if="${mainMessageType != 'success'}">
	                <th:block th:unless="${mainMessageType == 'confirm'}">
	                	<button type="button" th:if="${redirectLink == null or redirectLink == ''}" class="close" data-dismiss="modal">
	                		<span aria-hidden="true">&times;</span>
	                		<span class="sr-only" th:text="#{btn.lbl.clse}"></span>
	                	</button>
                	</th:block>
                </th:block>
            </div>
            <div class="modal-body">
            	<div id="mainMessageId" th:utext="${mainMessage}"></div>
            </div>
            <th:block th:if="${redirectLink != null or mainMessageType == 'success'}">
            	<div class="modal-footer">
            		<th:block th:if="${mainMessageType == 'confirm'}">
            			<button data-dismiss="modal" type="button" class="btn btn-default" th:text="#{btn.lbl.no}" ></button>
            			<button type="button" class="btn btn-info" th:text="#{btn.lbl.yes}" th:onclick="${redirectLink}" ></button>
            		</th:block>
            		<th:block th:unless="${mainMessageType == 'confirm'}">
            			<a th:if="${redirectLink == null}" class="btn btn-success" th:text="#{btn.lbl.ok}" data-dismiss="modal"></a>
            			<a th:if="${redirectLink != null}" th:href="@{${redirectLink}}" class="btn btn-success" th:text="#{btn.lbl.ok}"></a>
            		</th:block>
            	</div>
            </th:block>
        </div>
    </div>
</div>
</th:block>